<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>有关BufferedInputStream类中mark方法的readlimit参数的一些理解</title>
    <link href="/2022/12/16/%E6%9C%89%E5%85%B3BufferedInputStream%E7%B1%BB%E4%B8%ADmark%E6%96%B9%E6%B3%95%E7%9A%84readlimit%E5%8F%82%E6%95%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E7%90%86%E8%A7%A3/"/>
    <url>/2022/12/16/%E6%9C%89%E5%85%B3BufferedInputStream%E7%B1%BB%E4%B8%ADmark%E6%96%B9%E6%B3%95%E7%9A%84readlimit%E5%8F%82%E6%95%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>下面的代码使用了<code>BufferedInputStream</code>类作为输入流, 其构造方法的第二个参数<code>size</code>传入的是<code>3</code>, 这表示缓冲区大小设置为3个字节. 该类的<code>mark</code>方法的参数<code>readlimit</code>表示的是在调用<code>reset</code>方法之前可以读取的字节数的限制(若超出了这个数目则该标记可能会失效). 如下面的代码所示, <code>mark</code>的<code>readlimit</code>参数传入<code>1</code>, 并且在调用<code>reset</code>之前还读取了3个字节的数据, 但是, 调用<code>reset</code>方法时似乎仍然不会抛出异常. 实际上, 似乎只有当<code>readlimit</code>这个参数设置为大于缓冲区大小的时候, 这个参数才生效. 例如, 如果下面代码中<code>mark</code>方法传入的参数改为<code>4</code>, 此时如果再在调用<code>reset</code>方法之前读取超过4个字节的数据, 那么调用<code>reset</code>方法时就会抛出异常了. </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">try</span> (<span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">stream</span> <span class="hljs-operator">=</span><br>                     <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;test.txt&quot;</span>), <span class="hljs-number">3</span>)) &#123; <span class="hljs-comment">// 给size参数传入3</span><br>            System.out.print((<span class="hljs-type">char</span>) stream.read());<br>            System.out.print((<span class="hljs-type">char</span>) stream.read());<br>            System.out.print((<span class="hljs-type">char</span>) stream.read());<br>            System.out.print((<span class="hljs-type">char</span>) stream.read());<br>            System.out.print((<span class="hljs-type">char</span>) stream.read());<br>            System.out.println((<span class="hljs-type">char</span>) stream.read());<br>            stream.mark(<span class="hljs-number">1</span>); <span class="hljs-comment">// 给readlimit参数传入1</span><br>            System.out.print((<span class="hljs-type">char</span>) stream.read());<br>            System.out.print((<span class="hljs-type">char</span>) stream.read());<br>            System.out.println((<span class="hljs-type">char</span>) stream.read());<br>            stream.reset();<br>            System.out.print((<span class="hljs-type">char</span>) stream.read());<br>            System.out.println((<span class="hljs-type">char</span>) stream.read());<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>JavaSE</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用Java复制文本文件</title>
    <link href="/2022/12/15/%E4%BD%BF%E7%94%A8Java%E5%A4%8D%E5%88%B6%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6/"/>
    <url>/2022/12/15/%E4%BD%BF%E7%94%A8Java%E5%A4%8D%E5%88%B6%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>下面的代码的作用是复制一份文本文件(原文件为test.txt, 目标文件为result.txt): </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileReader;<br><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">try</span> (<span class="hljs-type">FileReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">&quot;test.txt&quot;</span>); <span class="hljs-type">FileWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(<span class="hljs-string">&quot;result.txt&quot;</span>)) &#123;<br>            <span class="hljs-type">char</span>[] charBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[<span class="hljs-number">5</span>]; <span class="hljs-comment">// 每次读取5个字符</span><br>            <span class="hljs-type">int</span> len;<br>            <span class="hljs-keyword">while</span> ((len = reader.read(charBuffer)) != -<span class="hljs-number">1</span>) &#123;<br>                writer.write(charBuffer, <span class="hljs-number">0</span>, len);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>上面的代码使用了FileReader和FileWriter两个文件字符流的类. </p>]]></content>
    
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>JavaSE</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用Java复制文件</title>
    <link href="/2022/12/14/%E4%BD%BF%E7%94%A8Java%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6/"/>
    <url>/2022/12/14/%E4%BD%BF%E7%94%A8Java%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>下面的代码作用是复制一份test1.mp4文件(复制出来的文件名称为test2.mp4): </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">try</span> (<span class="hljs-type">FileInputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;test1.mp4&quot;</span>); <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;test2.mp4&quot;</span>)) &#123;<br>            <span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>            <span class="hljs-type">int</span> len;<br>            <span class="hljs-keyword">while</span> ((len = in.read(bytes)) != -<span class="hljs-number">1</span>) &#123;<br>                out.write(bytes, <span class="hljs-number">0</span>, len);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>JavaSE</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
